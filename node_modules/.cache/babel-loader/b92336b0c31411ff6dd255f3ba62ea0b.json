{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\daniy\\\\Documents\\\\GitHub\\\\livemeetingapp\\\\liveapp\\\\client\\\\src\\\\components\\\\pages\\\\Room.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport AuthContext from '../../context/auth/authContext';\n\nconst Room = props => {\n  _s();\n\n  const userVideo = useRef();\n  const partnerVideo = useRef();\n  const peerRef = useRef();\n  const socketRef = useRef();\n  const otherUser = useRef();\n  const userStream = useRef();\n  const senders = useRef([]);\n  const authContext = useContext(AuthContext);\n  useEffect(() => {\n    authContext.loadUser(); // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: true\n    }).then(stream => {\n      userVideo.current.srcObject = stream;\n      userStream.current = stream;\n      socketRef.current = io.connect(\"/\");\n      socketRef.current.emit(\"join room\", props.match.params.roomID);\n      socketRef.current.on('other user', userID => {\n        callUser(userID);\n        otherUser.current = userID;\n      });\n      socketRef.current.on(\"user joined\", userID => {\n        otherUser.current = userID;\n      });\n      socketRef.current.on(\"offer\", handleRecieveCall);\n      socketRef.current.on(\"answer\", handleAnswer);\n      socketRef.current.on(\"ice-candidate\", handleNewICECandidateMsg);\n    });\n  }, []);\n\n  function callUser(userID) {\n    peerRef.current = createPeer(userID);\n    userStream.current.getTracks().forEach(track => senders.current.push(peerRef.current.addTrack(track, userStream.current)));\n  }\n\n  function createPeer(userID) {\n    const peer = new RTCPeerConnection({\n      iceServers: [{\n        urls: \"stun:stun.stunprotocol.org\"\n      }, {\n        urls: 'turn:numb.viagenie.ca',\n        credential: 'muazkh',\n        username: 'webrtc@live.com'\n      }]\n    });\n    peer.onicecandidate = handleICECandidateEvent;\n    peer.ontrack = handleTrackEvent;\n\n    peer.onnegotiationneeded = () => handleNegotiationNeededEvent(userID);\n\n    return peer;\n  }\n\n  function handleNegotiationNeededEvent(userID) {\n    peerRef.current.createOffer().then(offer => {\n      return peerRef.current.setLocalDescription(offer);\n    }).then(() => {\n      const payload = {\n        target: userID,\n        caller: socketRef.current.id,\n        sdp: peerRef.current.localDescription\n      };\n      socketRef.current.emit(\"offer\", payload);\n    }).catch(e => console.log(e));\n  }\n\n  function handleRecieveCall(incoming) {\n    peerRef.current = createPeer();\n    const desc = new RTCSessionDescription(incoming.sdp);\n    peerRef.current.setRemoteDescription(desc).then(() => {\n      userStream.current.getTracks().forEach(track => peerRef.current.addTrack(track, userStream.current));\n    }).then(() => {\n      return peerRef.current.createAnswer();\n    }).then(answer => {\n      return peerRef.current.setLocalDescription(answer);\n    }).then(() => {\n      const payload = {\n        target: incoming.caller,\n        caller: socketRef.current.id,\n        sdp: peerRef.current.localDescription\n      };\n      socketRef.current.emit(\"answer\", payload);\n    });\n  }\n\n  function handleAnswer(message) {\n    const desc = new RTCSessionDescription(message.sdp);\n    peerRef.current.setRemoteDescription(desc).catch(e => console.log(e));\n  }\n\n  function handleICECandidateEvent(e) {\n    if (e.candidate) {\n      const payload = {\n        target: otherUser.current,\n        candidate: e.candidate\n      };\n      socketRef.current.emit(\"ice-candidate\", payload);\n    }\n  }\n\n  function handleNewICECandidateMsg(incoming) {\n    const candidate = new RTCIceCandidate(incoming);\n    peerRef.current.addIceCandidate(candidate).catch(e => console.log(e));\n  }\n\n  function handleTrackEvent(e) {\n    partnerVideo.current.srcObject = e.streams[0];\n  }\n\n  ;\n\n  function shareScreen() {\n    navigator.mediaDevices.getDisplayMedia({\n      cursor: true\n    }).then(stream => {\n      const screenTrack = stream.getTracks()[0];\n      senders.current.find(sender => sender.track.kind === 'video').replaceTrack(screenTrack);\n\n      screenTrack.onended = function () {\n        senders.current.find(sender => sender.track.kind === \"video\").replaceTrack(userStream.current.getTracks()[1]);\n      };\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      controls: true,\n      style: {\n        height: 500,\n        width: 500\n      },\n      autoPlay: true,\n      ref: userVideo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      controls: true,\n      style: {\n        height: 500,\n        width: 500\n      },\n      autoPlay: true,\n      ref: partnerVideo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: shareScreen,\n      children: \"Share screen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Room, \"ch7PJrymBpeqKHscRgis2CZsw3o=\");\n\n_c = Room;\nexport default Room;\n\nvar _c;\n\n$RefreshReg$(_c, \"Room\");","map":{"version":3,"sources":["C:/Users/daniy/Documents/GitHub/livemeetingapp/liveapp/client/src/components/pages/Room.js"],"names":["React","useRef","useEffect","io","AuthContext","Room","props","userVideo","partnerVideo","peerRef","socketRef","otherUser","userStream","senders","authContext","useContext","loadUser","navigator","mediaDevices","getUserMedia","audio","video","then","stream","current","srcObject","connect","emit","match","params","roomID","on","userID","callUser","handleRecieveCall","handleAnswer","handleNewICECandidateMsg","createPeer","getTracks","forEach","track","push","addTrack","peer","RTCPeerConnection","iceServers","urls","credential","username","onicecandidate","handleICECandidateEvent","ontrack","handleTrackEvent","onnegotiationneeded","handleNegotiationNeededEvent","createOffer","offer","setLocalDescription","payload","target","caller","id","sdp","localDescription","catch","e","console","log","incoming","desc","RTCSessionDescription","setRemoteDescription","createAnswer","answer","message","candidate","RTCIceCandidate","addIceCandidate","streams","shareScreen","getDisplayMedia","cursor","screenTrack","find","sender","kind","replaceTrack","onended","height","width"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport AuthContext from '../../context/auth/authContext';\r\n\r\n\r\nconst Room = (props) => {\r\n    const userVideo = useRef();\r\n    const partnerVideo = useRef();\r\n    const peerRef = useRef();\r\n    const socketRef = useRef();\r\n    const otherUser = useRef();\r\n    const userStream = useRef();\r\n    const senders = useRef([]);\r\n\r\n    const authContext = useContext(AuthContext);\r\n    useEffect(() => {\r\n        authContext.loadUser();\r\n         // eslint-disable-next-line\r\n      }, []);\r\n\r\n    useEffect(() => {\r\n        navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(stream => {\r\n            userVideo.current.srcObject = stream;\r\n            userStream.current = stream;\r\n\r\n            socketRef.current = io.connect(\"/\");\r\n            socketRef.current.emit(\"join room\", props.match.params.roomID);\r\n\r\n            socketRef.current.on('other user', userID => {\r\n                callUser(userID);\r\n                otherUser.current = userID;\r\n            });\r\n\r\n            socketRef.current.on(\"user joined\", userID => {\r\n                otherUser.current = userID;\r\n            });\r\n\r\n            socketRef.current.on(\"offer\", handleRecieveCall);\r\n\r\n            socketRef.current.on(\"answer\", handleAnswer);\r\n\r\n            socketRef.current.on(\"ice-candidate\", handleNewICECandidateMsg);\r\n        });\r\n\r\n    }, []);\r\n\r\n    function callUser(userID) {\r\n        peerRef.current = createPeer(userID);\r\n        userStream.current.getTracks().forEach(track => senders.current.push(peerRef.current.addTrack(track, userStream.current)));\r\n    }\r\n\r\n    function createPeer(userID) {\r\n        const peer = new RTCPeerConnection({\r\n            iceServers: [\r\n                {\r\n                    urls: \"stun:stun.stunprotocol.org\"\r\n                },\r\n                {\r\n                    urls: 'turn:numb.viagenie.ca',\r\n                    credential: 'muazkh',\r\n                    username: 'webrtc@live.com'\r\n                },\r\n            ]\r\n        });\r\n\r\n        peer.onicecandidate = handleICECandidateEvent;\r\n        peer.ontrack = handleTrackEvent;\r\n        peer.onnegotiationneeded = () => handleNegotiationNeededEvent(userID);\r\n\r\n        return peer;\r\n    }\r\n\r\n    function handleNegotiationNeededEvent(userID) {\r\n        peerRef.current.createOffer().then(offer => {\r\n            return peerRef.current.setLocalDescription(offer);\r\n        }).then(() => {\r\n            const payload = {\r\n                target: userID,\r\n                caller: socketRef.current.id,\r\n                sdp: peerRef.current.localDescription\r\n            };\r\n            socketRef.current.emit(\"offer\", payload);\r\n        }).catch(e => console.log(e));\r\n    }\r\n\r\n    function handleRecieveCall(incoming) {\r\n        peerRef.current = createPeer();\r\n        const desc = new RTCSessionDescription(incoming.sdp);\r\n        peerRef.current.setRemoteDescription(desc).then(() => {\r\n            userStream.current.getTracks().forEach(track => peerRef.current.addTrack(track, userStream.current));\r\n        }).then(() => {\r\n            return peerRef.current.createAnswer();\r\n        }).then(answer => {\r\n            return peerRef.current.setLocalDescription(answer);\r\n        }).then(() => {\r\n            const payload = {\r\n                target: incoming.caller,\r\n                caller: socketRef.current.id,\r\n                sdp: peerRef.current.localDescription\r\n            }\r\n            socketRef.current.emit(\"answer\", payload);\r\n        })\r\n    }\r\n\r\n    function handleAnswer(message) {\r\n        const desc = new RTCSessionDescription(message.sdp);\r\n        peerRef.current.setRemoteDescription(desc).catch(e => console.log(e));\r\n    }\r\n\r\n    function handleICECandidateEvent(e) {\r\n        if (e.candidate) {\r\n            const payload = {\r\n                target: otherUser.current,\r\n                candidate: e.candidate,\r\n            }\r\n            socketRef.current.emit(\"ice-candidate\", payload);\r\n        }\r\n    }\r\n\r\n    function handleNewICECandidateMsg(incoming) {\r\n        const candidate = new RTCIceCandidate(incoming);\r\n\r\n        peerRef.current.addIceCandidate(candidate)\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n    function handleTrackEvent(e) {\r\n        partnerVideo.current.srcObject = e.streams[0];\r\n    };\r\n\r\n    function shareScreen() {\r\n        navigator.mediaDevices.getDisplayMedia({ cursor: true }).then(stream => {\r\n            const screenTrack = stream.getTracks()[0];\r\n            senders.current.find(sender => sender.track.kind === 'video').replaceTrack(screenTrack);\r\n            screenTrack.onended = function() {\r\n                senders.current.find(sender => sender.track.kind === \"video\").replaceTrack(userStream.current.getTracks()[1]);\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <video controls style={{height: 500, width: 500}} autoPlay ref={userVideo} />\r\n            <video controls style={{height: 500, width: 500}} autoPlay ref={partnerVideo} />\r\n            <button onClick={shareScreen}>Share screen</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Room;"]},"metadata":{},"sourceType":"module"}